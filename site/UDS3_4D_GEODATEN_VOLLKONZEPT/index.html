
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Einheitliche UDS3 Doku mit API-Referenz und Leitfäden">
      
      
      
        <link rel="canonical" href="https://makr-code.github.io/VCC-UDS3/UDS3_4D_GEODATEN_VOLLKONZEPT/">
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>UDS3 4D-Geodaten Integration - Vollständiges Konzept (X,Y,Z,T + Multi-CRS) - VCC UDS3 Dokumentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#uds3-4d-geodaten-integration-vollstandiges-konzept-xyzt-multi-crs" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Kopfzeile">
    <a href=".." title="VCC UDS3 Dokumentation" class="md-header__button md-logo" aria-label="VCC UDS3 Dokumentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            VCC UDS3 Dokumentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              UDS3 4D-Geodaten Integration - Vollständiges Konzept (X,Y,Z,T + Multi-CRS)
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
        <button type="reset" class="md-search__icon md-icon" title="Zurücksetzen" aria-label="Zurücksetzen" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/makr-code/VCC-UDS3" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    makr-code/VCC-UDS3
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Hauptnavigation" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../index.md" class="md-tabs__link">
        
  
  
    
  
  Start

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../api/" class="md-tabs__link">
          
  
  
  API-Referenz

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="VCC UDS3 Dokumentation" class="md-nav__button md-logo" aria-label="VCC UDS3 Dokumentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    VCC UDS3 Dokumentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/makr-code/VCC-UDS3" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    makr-code/VCC-UDS3
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Start
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API-Referenz
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            API-Referenz
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Übersicht
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ubersicht" class="md-nav__link">
    <span class="md-ellipsis">
      Übersicht
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Übersicht">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#erweiterte-4d-architektur" class="md-nav__link">
    <span class="md-ellipsis">
      Erweiterte 4D-Architektur
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4d-koordinaten-modell-xyzt-uvw" class="md-nav__link">
    <span class="md-ellipsis">
      4D-Koordinaten-Modell (X,Y,Z,T + U,V,W)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4D-Koordinaten-Modell (X,Y,Z,T + U,V,W)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#koordinaten-dimensionen" class="md-nav__link">
    <span class="md-ellipsis">
      Koordinaten-Dimensionen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unterstutzte-coordinate-reference-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Unterstützte Coordinate Reference Systems
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3d-geometrie-typen-und-volumetrie" class="md-nav__link">
    <span class="md-ellipsis">
      3D-Geometrie-Typen und Volumetrie
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3D-Geometrie-Typen und Volumetrie">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#erweiterte-geometrie-unterstutzung" class="md-nav__link">
    <span class="md-ellipsis">
      Erweiterte Geometrie-Unterstützung
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volumetrische-parameter" class="md-nav__link">
    <span class="md-ellipsis">
      Volumetrische Parameter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#postgis-4d-database-schema" class="md-nav__link">
    <span class="md-ellipsis">
      PostGIS 4D-Database-Schema
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PostGIS 4D-Database-Schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#erweiterte-dokumenten-tabelle" class="md-nav__link">
    <span class="md-ellipsis">
      Erweiterte Dokumenten-Tabelle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#crs-definitionen-tabelle" class="md-nav__link">
    <span class="md-ellipsis">
      CRS-Definitionen-Tabelle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#erweiterte-raumliche-indizes" class="md-nav__link">
    <span class="md-ellipsis">
      Erweiterte räumliche Indizes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4d-abfrage-funktionalitaten" class="md-nav__link">
    <span class="md-ellipsis">
      4D-Abfrage-Funktionalitäten
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4D-Abfrage-Funktionalitäten">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#raumlich-zeitliche-suche" class="md-nav__link">
    <span class="md-ellipsis">
      Räumlich-zeitliche Suche
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volumetrische-abfragen" class="md-nav__link">
    <span class="md-ellipsis">
      Volumetrische Abfragen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#crs-transformations-engine" class="md-nav__link">
    <span class="md-ellipsis">
      CRS-Transformations-Engine
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CRS-Transformations-Engine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#automatische-koordinaten-transformation" class="md-nav__link">
    <span class="md-ellipsis">
      Automatische Koordinaten-Transformation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unterstutzte-transformationen" class="md-nav__link">
    <span class="md-ellipsis">
      Unterstützte Transformationen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deutsche-administrative-4d-hierarchie" class="md-nav__link">
    <span class="md-ellipsis">
      Deutsche Administrative 4D-Hierarchie
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deutsche Administrative 4D-Hierarchie">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#zeitliche-verwaltungsgrenzen-evolution" class="md-nav__link">
    <span class="md-ellipsis">
      Zeitliche Verwaltungsgrenzen-Evolution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#administrative-hierarchie-abfragen" class="md-nav__link">
    <span class="md-ellipsis">
      Administrative Hierarchie-Abfragen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-in-uds3-core" class="md-nav__link">
    <span class="md-ellipsis">
      Integration in UDS3-Core
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Integration in UDS3-Core">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#erweiterte-uds3corewithgeo4d-klasse" class="md-nav__link">
    <span class="md-ellipsis">
      Erweiterte UDS3CoreWithGeo4D-Klasse
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-optimierung-fur-4d-daten" class="md-nav__link">
    <span class="md-ellipsis">
      Performance-Optimierung für 4D-Daten
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance-Optimierung für 4D-Daten">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#postgis-4d-performance-tuning" class="md-nav__link">
    <span class="md-ellipsis">
      PostGIS 4D-Performance-Tuning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#caching-strategien" class="md-nav__link">
    <span class="md-ellipsis">
      Caching-Strategien
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#qualitatssicherung-und-validierung" class="md-nav__link">
    <span class="md-ellipsis">
      Qualitätssicherung und Validierung
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Qualitätssicherung und Validierung">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4d-datenqualitat-framework" class="md-nav__link">
    <span class="md-ellipsis">
      4D-Datenqualität-Framework
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-und-analytics" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring und Analytics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Monitoring und Analytics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#4d-geodaten-metriken" class="md-nav__link">
    <span class="md-ellipsis">
      4D-Geodaten-Metriken
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fazit-und-ausblick" class="md-nav__link">
    <span class="md-ellipsis">
      Fazit und Ausblick
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Fazit und Ausblick">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kernvorteile" class="md-nav__link">
    <span class="md-ellipsis">
      Kernvorteile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#zukunftige-erweiterungen" class="md-nav__link">
    <span class="md-ellipsis">
      Zukünftige Erweiterungen
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/makr-code/VCC-UDS3/edit/master/docs/UDS3_4D_GEODATEN_VOLLKONZEPT.md" title="Seite editieren" class="md-content__button md-icon" rel="edit">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="uds3-4d-geodaten-integration-vollstandiges-konzept-xyzt-multi-crs">UDS3 4D-Geodaten Integration - Vollständiges Konzept (X,Y,Z,T + Multi-CRS)<a class="headerlink" href="#uds3-4d-geodaten-integration-vollstandiges-konzept-xyzt-multi-crs" title="Permanent link">&para;</a></h1>
<h2 id="ubersicht">Übersicht<a class="headerlink" href="#ubersicht" title="Permanent link">&para;</a></h2>
<p>Das UDS3 4D-Geodaten-System stellt eine revolutionäre Erweiterung der Unified Database Strategy v3.0 dar und bietet <strong>vollständige 4-dimensionale Geodaten-Integration</strong> mit räumlichen (X,Y,Z) und zeitlichen (T) Koordinaten sowie <strong>Multi-Coordinate-Reference-System (Multi-CRS) Support</strong>.</p>
<h3 id="erweiterte-4d-architektur">Erweiterte 4D-Architektur<a class="headerlink" href="#erweiterte-4d-architektur" title="Permanent link">&para;</a></h3>
<pre><code class="language-text">┌─────────────────────────────────────────────────────────────┐
│              UDS3 4D-GEODATEN INTEGRATION v2.0             │
├─────────────────────────────────────────────────────────────┤
│  Vector DB        │  Graph DB         │  Relational DB      │
│  (Semantik 4D)    │  (4D-Beziehungen) │  (4D-Metadaten)     │
│  ─────────────    │  ─────────────    │  ─────────────      │
│  • ChromaDB       │  • Neo4j Spatial  │  • PostgreSQL       │
│  • Geo-Embeddings │  • XYZM Relations │  • PostGIS 4D       │  
│  • Temporal Vec   │  • CRS-Hierarchie │  • Multi-SRID       │
│  • Spatial Context│  • Admin-4D-Tree  │  • Temporal Queries │
└─────────────────────────────────────────────────────────────┘
                              │
                    ┌─────────┴─────────┐
                    │  4D-GEODATEN-CORE │
                    └─────────┬─────────┘
┌─────────────────────────────┼─────────────────────────────┐
│                4D-PROCESSING PIPELINE                    │
├─────────────────────────────┼─────────────────────────────┤
│  PostGIS 4D        │  Multi-CRS Engine │  Volumetric 3D    │
│  (XYZM Storage)    │  (Transform U,V,W)│  (3D Geometries)  │
│  ─────────────     │  ─────────────    │  ─────────────    │
│  • POINTZM         │  • WGS84 ⇔ UTM   │  • SPHERE         │
│  • LINESTRING ZM   │  • Gauß-Krüger   │  • CYLINDER       │
│  • POLYGON ZM      │  • ETRS89         │  • BOX (Building) │
│  • Temporal Index  │  • Local/Custom   │  • POLYHEDRON     │
│  • 4D ST_Distance  │  • Helmert-7Para  │  • VOXEL_GRID     │
└─────────────────────────────────────────────────────────────┘
                              │
                ┌─────────────┴─────────────┐
                │    DEUTSCHE 4D-GEOGRAPHIE │
                └─────────────┬─────────────┘
┌─────────────────────────────┼─────────────────────────────┐
│             ADMINISTRATIVE 4D-HIERARCHIE                 │
├─────────────────────────────┼─────────────────────────────┤
│  Bund (Deutschland)         │  Zeit-Administrative        │
│  ├─ Länder (16)            │  Grenzen-Evolution          │  
│  ├─ Regierungsbezirke      │  ├─ Historische Zuordnung   │
│  ├─ Kreise/Städte          │  ├─ Territorial-Reformen    │
│  └─ Gemeinden/Ortsteile    │  └─ Zeitliche Gültigkeit   │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h2 id="4d-koordinaten-modell-xyzt-uvw">4D-Koordinaten-Modell (X,Y,Z,T + U,V,W)<a class="headerlink" href="#4d-koordinaten-modell-xyzt-uvw" title="Permanent link">&para;</a></h2>
<h3 id="koordinaten-dimensionen">Koordinaten-Dimensionen<a class="headerlink" href="#koordinaten-dimensionen" title="Permanent link">&para;</a></h3>
<pre><code class="language-python">class SpatialCoordinate:
    # Basis-4D-Koordinaten
    x: float                    # X/Longitude/Ostwert
    y: float                    # Y/Latitude/Nordwert  
    z: Optional[float]          # Z/Elevation/Höhe
    t: Optional[datetime]       # T/Time/Zeitstempel

    # Erweiterte Transformations-Parameter
    u: Optional[float]          # U-Parameter (Rotation/Scale)
    v: Optional[float]          # V-Parameter (Translation)
    w: Optional[float]          # W-Parameter (Projektion)

    # Multi-CRS-Definition
    crs: CoordinateReferenceSystem
    transformation_params: Optional[TransformationParameters]

    # Qualitäts-/Genauigkeitsmetriken
    accuracy_xy: Optional[float]    # Horizontale Genauigkeit (m)
    accuracy_z: Optional[float]     # Vertikale Genauigkeit (m)
    accuracy_t: Optional[float]     # Zeitliche Genauigkeit (s)
</code></pre>
<h3 id="unterstutzte-coordinate-reference-systems">Unterstützte Coordinate Reference Systems<a class="headerlink" href="#unterstutzte-coordinate-reference-systems" title="Permanent link">&para;</a></h3>
<pre><code class="language-python">class CoordinateReferenceSystem(Enum):
    # Geografische Systeme
    WGS84_2D = (&quot;EPSG:4326&quot;, &quot;WGS 84&quot;, 2)
    WGS84_3D = (&quot;EPSG:4979&quot;, &quot;WGS 84 3D&quot;, 3)  
    ETRS89_2D = (&quot;EPSG:4258&quot;, &quot;ETRS89&quot;, 2)
    ETRS89_3D = (&quot;EPSG:4937&quot;, &quot;ETRS89 3D&quot;, 3)

    # Projektive deutsche Systeme
    UTM32N_ETRS89 = (&quot;EPSG:25832&quot;, &quot;UTM 32N&quot;, 2)
    UTM33N_ETRS89 = (&quot;EPSG:25833&quot;, &quot;UTM 33N&quot;, 2) 
    GAUSS_KRUGER_3 = (&quot;EPSG:31467&quot;, &quot;GK Zone 3&quot;, 2)
    GAUSS_KRUGER_4 = (&quot;EPSG:31468&quot;, &quot;GK Zone 4&quot;, 2)

    # Web/Anwendungs-Systeme
    WEB_MERCATOR = (&quot;EPSG:3857&quot;, &quot;Web Mercator&quot;, 2)

    # Lokale/Spezielle Systeme
    LOCAL_CARTESIAN = (&quot;LOCAL:CART&quot;, &quot;Local Cartesian&quot;, 3)
    BUILDING_LOCAL = (&quot;LOCAL:BLD&quot;, &quot;Building Coordinates&quot;, 3)
    SURVEY_LOCAL = (&quot;LOCAL:SURVEY&quot;, &quot;Survey Grid&quot;, 2)
</code></pre>
<h2 id="3d-geometrie-typen-und-volumetrie">3D-Geometrie-Typen und Volumetrie<a class="headerlink" href="#3d-geometrie-typen-und-volumetrie" title="Permanent link">&para;</a></h2>
<h3 id="erweiterte-geometrie-unterstutzung">Erweiterte Geometrie-Unterstützung<a class="headerlink" href="#erweiterte-geometrie-unterstutzung" title="Permanent link">&para;</a></h3>
<pre><code class="language-python">class GeometryType(Enum):
    # 2D-Basis
    POINT = &quot;POINT&quot;
    LINESTRING = &quot;LINESTRING&quot;
    POLYGON = &quot;POLYGON&quot;

    # 3D-Geometrien (Z-Koordinate)
    POINT_Z = &quot;POINT Z&quot;
    LINESTRING_Z = &quot;LINESTRING Z&quot;
    POLYGON_Z = &quot;POLYGON Z&quot;

    # 4D-Geometrien (Z + Time/Measure)
    POINT_ZM = &quot;POINT ZM&quot;
    LINESTRING_ZM = &quot;LINESTRING ZM&quot; 
    POLYGON_ZM = &quot;POLYGON ZM&quot;

    # Volumetrische 3D-Objekte
    SPHERE = &quot;SPHERE&quot;              # Kugel (Radius)
    CYLINDER = &quot;CYLINDER&quot;          # Zylinder (Radius, Höhe)
    BOX = &quot;BOX&quot;                    # Quader (Breite, Tiefe, Höhe)
    POLYHEDRON = &quot;POLYHEDRON&quot;      # Polyeder (Facetten)
    CONE = &quot;CONE&quot;                  # Kegel (Radius, Höhe)  
    ELLIPSOID = &quot;ELLIPSOID&quot;        # Ellipsoid (a, b, c)

    # Spezial-Strukturen
    BUILDING = &quot;BUILDING&quot;          # Gebäude-Komplex
    TERRAIN = &quot;TERRAIN&quot;            # Geländemodell (TIN)
    VOXEL_GRID = &quot;VOXEL_GRID&quot;     # Voxel-basierte Volumen
</code></pre>
<h3 id="volumetrische-parameter">Volumetrische Parameter<a class="headerlink" href="#volumetrische-parameter" title="Permanent link">&para;</a></h3>
<pre><code class="language-python">@dataclass
class VolumetricParameters:
    # Basis-Parameter
    radius: Optional[float] = None          # Sphere, Cylinder
    height: Optional[float] = None          # Cylinder, Cone, Box
    width: Optional[float] = None           # Box
    depth: Optional[float] = None           # Box

    # Ellipsoid-Parameter  
    semi_major_axis: Optional[float] = None
    semi_minor_axis: Optional[float] = None
    semi_polar_axis: Optional[float] = None

    # 3D-Orientierung
    orientation_x: float = 0.0              # Rotation um X-Achse (°)
    orientation_y: float = 0.0              # Rotation um Y-Achse (°)  
    orientation_z: float = 0.0              # Rotation um Z-Achse (°)

    # Voxel-Raster
    voxel_size: Optional[Tuple[float, float, float]] = None
    voxel_resolution: Optional[Tuple[int, int, int]] = None
</code></pre>
<h2 id="postgis-4d-database-schema">PostGIS 4D-Database-Schema<a class="headerlink" href="#postgis-4d-database-schema" title="Permanent link">&para;</a></h2>
<h3 id="erweiterte-dokumenten-tabelle">Erweiterte Dokumenten-Tabelle<a class="headerlink" href="#erweiterte-dokumenten-tabelle" title="Permanent link">&para;</a></h3>
<pre><code class="language-sql">CREATE TABLE uds3_documents_4d_geo (
    -- Basis-Identifikation
    id VARCHAR(64) PRIMARY KEY,
    title VARCHAR(500) NOT NULL,
    content_preview TEXT,

    -- Standard UDS3-Metadaten
    rechtsgebiet VARCHAR(200),
    gericht VARCHAR(200),
    aktenzeichen VARCHAR(200),
    entscheidungsdatum DATE,

    -- 4D-Geometrien (Multi-SRID Support)
    primary_geometry GEOMETRY,              -- Haupt-Geometrie (beliebiges SRID)
    primary_geometry_srid INTEGER,          -- SRID der Haupt-Geometrie
    primary_geometry_type VARCHAR(50),      -- Geometrie-Typ

    -- Legacy 2D-Koordinaten (WGS84 für Kompatibilität)
    location_point GEOMETRY(POINT, 4326),

    -- 3D/4D-Koordinaten
    location_3d GEOMETRY(POINTZ, 4326),     -- 3D-Punkt
    location_4d GEOMETRY(POINTZM, 4326),    -- 4D-Punkt (Z=Höhe, M=Zeit)

    -- Zusätzliche Geometrien
    additional_geometries GEOMETRY[],        -- Array von Geometrien
    additional_geometries_meta JSONB,       -- Metadaten

    -- Volumetrische Parameter
    volume_type VARCHAR(50),                 -- SPHERE, CYLINDER, BOX
    volume_parameters JSONB,                 -- Volumen-Parameter
    calculated_volume NUMERIC(12,3),        -- Berechnetes Volumen (m³)

    -- Zeitliche Eigenschaften
    temporal_validity_start TIMESTAMP,      -- Gültig von
    temporal_validity_end TIMESTAMP,        -- Gültig bis
    temporal_resolution NUMERIC(10,2),      -- Zeitauflösung (s)
    observation_time TIMESTAMP,             -- Beobachtungszeit

    -- Multi-CRS-Informationen
    native_crs VARCHAR(20),                  -- Ursprüngliches CRS
    supported_crs VARCHAR[],                 -- Verfügbare CRS
    transformation_parameters JSONB,        -- Transformations-Parameter

    -- Qualitäts-/Genauigkeitsmetriken
    geometric_accuracy_xy NUMERIC(8,2),     -- Horizontale Genauigkeit (m)
    geometric_accuracy_z NUMERIC(8,2),      -- Vertikale Genauigkeit (m)
    geometric_accuracy_t NUMERIC(6,2),      -- Zeitliche Genauigkeit (s)
    topological_quality NUMERIC(4,3),       -- Topologische Qualität (0-1)
    completeness_score NUMERIC(4,3),        -- Vollständigkeit (0-1)
    overall_quality_score NUMERIC(4,3),     -- Gesamt-Qualität (0-1)

    -- Administrative 4D-Zuordnung
    administrative_areas TEXT[],            -- Administrative Gebiete
    political_boundaries TEXT[],           -- Politische Grenzen
    postal_code VARCHAR(10),
    municipality VARCHAR(100),
    district VARCHAR(100),
    state VARCHAR(50),
    country VARCHAR(50) DEFAULT 'Deutschland',

    -- Audit und Provenance
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    geo_processed_at TIMESTAMP
);
</code></pre>
<h3 id="crs-definitionen-tabelle">CRS-Definitionen-Tabelle<a class="headerlink" href="#crs-definitionen-tabelle" title="Permanent link">&para;</a></h3>
<pre><code class="language-sql">CREATE TABLE uds3_coordinate_systems (
    crs_code VARCHAR(20) PRIMARY KEY,       -- EPSG:4326, LOCAL:CART
    crs_name VARCHAR(200) NOT NULL,         -- &quot;WGS 84&quot;, &quot;Local Cartesian&quot;
    crs_authority VARCHAR(20) NOT NULL,     -- EPSG, LOCAL, CUSTOM
    crs_id INTEGER,                         -- Numerische ID  
    dimensions INTEGER DEFAULT 2,           -- 2D, 3D, 4D
    unit_name VARCHAR(50),                  -- degree, metre, foot
    unit_factor NUMERIC(15,8),              -- Umrechnungsfaktor
    area_of_use TEXT,                       -- Anwendungsbereich
    transformation_wkt TEXT,                -- WKT-Definition
    custom_definition JSONB,                -- Custom-Parameter
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
</code></pre>
<h3 id="erweiterte-raumliche-indizes">Erweiterte räumliche Indizes<a class="headerlink" href="#erweiterte-raumliche-indizes" title="Permanent link">&para;</a></h3>
<pre><code class="language-sql">-- Multi-Geometrie-Indizes
CREATE INDEX idx_uds3_4d_primary_geometry ON uds3_documents_4d_geo USING GIST(primary_geometry);
CREATE INDEX idx_uds3_4d_location_point ON uds3_documents_4d_geo USING GIST(location_point);
CREATE INDEX idx_uds3_4d_location_3d ON uds3_documents_4d_geo USING GIST(location_3d);
CREATE INDEX idx_uds3_4d_location_4d ON uds3_documents_4d_geo USING GIST(location_4d);

-- Zeitliche Indizes
CREATE INDEX idx_uds3_4d_temporal_validity ON uds3_documents_4d_geo(temporal_validity_start, temporal_validity_end);
CREATE INDEX idx_uds3_4d_observation_time ON uds3_documents_4d_geo(observation_time);

-- CRS-Indizes
CREATE INDEX idx_uds3_4d_native_crs ON uds3_documents_4d_geo(native_crs);
CREATE INDEX idx_uds3_4d_supported_crs ON uds3_documents_4d_geo USING GIN(supported_crs);

-- Qualitäts-Indizes
CREATE INDEX idx_uds3_4d_quality_score ON uds3_documents_4d_geo(overall_quality_score);
CREATE INDEX idx_uds3_4d_accuracy_xy ON uds3_documents_4d_geo(geometric_accuracy_xy);

-- Administrative Indizes
CREATE INDEX idx_uds3_4d_admin_areas ON uds3_documents_4d_geo USING GIN(administrative_areas);
</code></pre>
<h2 id="4d-abfrage-funktionalitaten">4D-Abfrage-Funktionalitäten<a class="headerlink" href="#4d-abfrage-funktionalitaten" title="Permanent link">&para;</a></h2>
<h3 id="raumlich-zeitliche-suche">Räumlich-zeitliche Suche<a class="headerlink" href="#raumlich-zeitliche-suche" title="Permanent link">&para;</a></h3>
<pre><code class="language-sql">-- 4D-Suche: Räumlich + zeitlich + Multi-CRS
SELECT 
    d.id, d.title,
    ST_X(d.location_point) as longitude,
    ST_Y(d.location_point) as latitude, 
    ST_Z(d.location_3d) as elevation,
    ST_M(d.location_4d) as time_measure,

    -- 3D-Distanz-Berechnung  
    ST_3DDistance(
        ST_Transform(d.location_3d, 25832),  -- UTM für Genauigkeit
        ST_Transform(ST_GeomFromText(%s, %s), 25832)
    ) as distance_3d_m,

    -- Zeitliche Distanz
    EXTRACT(EPOCH FROM (d.observation_time - %s)) as time_diff_seconds,

    -- CRS-Informationen
    d.native_crs, d.supported_crs,
    d.overall_quality_score

FROM uds3_documents_4d_geo d
WHERE 
    -- Räumliche Bedingung (3D)
    ST_3DWithin(
        ST_Transform(d.location_3d, 25832),
        ST_Transform(ST_GeomFromText(%s, %s), 25832), 
        %s  -- Radius in Metern
    )
    -- Zeitliche Bedingung
    AND d.observation_time BETWEEN %s AND %s
    -- Qualitäts-Filter
    AND d.overall_quality_score &gt;= %s
    -- CRS-Filter (unterstützt Multi-CRS)
    AND (%s = ANY(d.supported_crs) OR d.native_crs = %s)

ORDER BY distance_3d_m ASC, time_diff_seconds ASC
LIMIT %s;
</code></pre>
<h3 id="volumetrische-abfragen">Volumetrische Abfragen<a class="headerlink" href="#volumetrische-abfragen" title="Permanent link">&para;</a></h3>
<pre><code class="language-sql">-- Volumen-basierte Suche
SELECT 
    d.id, d.title, d.volume_type, d.calculated_volume,
    d.volume_parameters,

    -- Volumen-Überschneidung prüfen
    CASE d.volume_type
        WHEN 'SPHERE' THEN 
            -- Sphäre-Sphäre-Überschneidung
            CASE WHEN ST_3DDistance(d.location_3d, ST_GeomFromText(%s)) &lt;= 
                     (d.volume_parameters-&gt;&gt;'radius')::FLOAT + %s
            THEN TRUE ELSE FALSE END
        WHEN 'BOX' THEN
            -- Box-Überschneidung (vereinfacht)
            ST_3DIntersects(d.primary_geometry, ST_GeomFromText(%s))
        ELSE FALSE
    END as volume_intersects

FROM uds3_documents_4d_geo d
WHERE d.volume_type IS NOT NULL
  AND d.calculated_volume BETWEEN %s AND %s

ORDER BY d.calculated_volume DESC;
</code></pre>
<h2 id="crs-transformations-engine">CRS-Transformations-Engine<a class="headerlink" href="#crs-transformations-engine" title="Permanent link">&para;</a></h2>
<h3 id="automatische-koordinaten-transformation">Automatische Koordinaten-Transformation<a class="headerlink" href="#automatische-koordinaten-transformation" title="Permanent link">&para;</a></h3>
<pre><code class="language-python">class CRSTransformer:
    &quot;&quot;&quot;Multi-CRS-Transformations-Engine&quot;&quot;&quot;

    def transform_coordinate(self, coord: SpatialCoordinate, 
                           target_crs: CoordinateReferenceSystem) -&gt; SpatialCoordinate:
        &quot;&quot;&quot;Transformiert Koordinate zwischen CRS&quot;&quot;&quot;

        # Pyproj-basierte Transformation
        transformer = Transformer.from_crs(
            coord.crs.code, 
            target_crs.code,
            always_xy=True
        )

        if coord.z is not None:
            x_new, y_new, z_new = transformer.transform(coord.x, coord.y, coord.z)
        else:
            x_new, y_new = transformer.transform(coord.x, coord.y)
            z_new = None

        return SpatialCoordinate(
            x=x_new, y=y_new, z=z_new, t=coord.t,
            crs=target_crs,
            # Genauigkeit anpassen für Transformation
            accuracy_xy=coord.accuracy_xy * 1.1 if coord.accuracy_xy else None,
            source=f&quot;transformed_from_{coord.crs.code}&quot;
        )
</code></pre>
<h3 id="unterstutzte-transformationen">Unterstützte Transformationen<a class="headerlink" href="#unterstutzte-transformationen" title="Permanent link">&para;</a></h3>
<p><strong>Deutsche Standard-Transformationen:</strong>
- <strong>WGS84 ⇔ ETRS89</strong>: Hochgenaue europäische Referenz
- <strong>Geografisch ⇔ UTM</strong>: UTM Zone 32N/33N für Deutschland
- <strong>UTM ⇔ Gauß-Krüger</strong>: Legacy-Systeme (DHDN)
- <strong>Global ⇔ Lokal</strong>: Gebäude-/Vermessungs-Koordinaten
- <strong>2D ⇔ 3D</strong>: Höhen-Integration bei verfügbaren Daten</p>
<p><strong>Transformations-Parameter:</strong>
- <strong>Helmert-7-Parameter</strong>: Datum-Transformationen
- <strong>Grid-Shift-Files</strong>: NTv2-Korrektur-Grids
- <strong>Lokale Parameter</strong>: Custom-Transformationen für spezielle Anwendungen</p>
<h2 id="deutsche-administrative-4d-hierarchie">Deutsche Administrative 4D-Hierarchie<a class="headerlink" href="#deutsche-administrative-4d-hierarchie" title="Permanent link">&para;</a></h2>
<h3 id="zeitliche-verwaltungsgrenzen-evolution">Zeitliche Verwaltungsgrenzen-Evolution<a class="headerlink" href="#zeitliche-verwaltungsgrenzen-evolution" title="Permanent link">&para;</a></h3>
<pre><code class="language-python">@dataclass  
class Administrative4DArea:
    &quot;&quot;&quot;4D-Administrative Gebiete mit zeitlicher Gültigkeit&quot;&quot;&quot;

    # Administrative Identifikation
    ags_code: str                    # Amtlicher Gemeindeschlüssel
    name: str                        # Gebietsname
    admin_level: int                 # 1=Bund, 2=Land, 3=RB, 4=Kreis, 5=Gemeinde

    # Geometrie mit Zeitbezug
    boundary_geometry: SpatialGeometry      # Grenz-Polygon 
    validity_start: datetime                # Gültig ab
    validity_end: Optional[datetime]        # Gültig bis (None=aktuell)

    # Hierarchie-Beziehungen
    parent_ags: Optional[str]               # Übergeordnete Einheit
    child_ags_list: List[str]              # Untergeordnete Einheiten

    # Historische Änderungen
    predecessor_ags: List[str]              # Rechtsvorgänger
    successor_ags: List[str]               # Rechtsnachfolger
    change_reason: Optional[str]            # Grund der Änderung
</code></pre>
<h3 id="administrative-hierarchie-abfragen">Administrative Hierarchie-Abfragen<a class="headerlink" href="#administrative-hierarchie-abfragen" title="Permanent link">&para;</a></h3>
<pre><code class="language-sql">-- Zeitliche Administrative Zuordnung
WITH administrative_hierarchy AS (
    SELECT 
        ags_code, name, admin_level, parent_ags,
        boundary_geometry, validity_start, validity_end
    FROM uds3_administrative_4d_areas
    WHERE validity_start &lt;= %s 
      AND (validity_end IS NULL OR validity_end &gt;= %s)
      AND ST_Contains(boundary_geometry, ST_GeomFromText(%s, 4326))
)
SELECT 
    -- Dokument-Informationen
    d.id, d.title, d.rechtsgebiet,

    -- Administrative Zuordnung zur Abfrage-Zeit
    array_agg(ah.name ORDER BY ah.admin_level) as admin_hierarchy,
    array_agg(ah.ags_code ORDER BY ah.admin_level) as ags_hierarchy,

    -- Räumlich-zeitliche Gültigkeit
    d.observation_time,
    d.temporal_validity_start,
    d.temporal_validity_end

FROM uds3_documents_4d_geo d
JOIN administrative_hierarchy ah ON ST_Contains(ah.boundary_geometry, d.location_point)
WHERE d.observation_time BETWEEN %s AND %s
GROUP BY d.id, d.title, d.rechtsgebiet, d.observation_time, d.temporal_validity_start, d.temporal_validity_end
ORDER BY d.observation_time DESC;
</code></pre>
<h2 id="integration-in-uds3-core">Integration in UDS3-Core<a class="headerlink" href="#integration-in-uds3-core" title="Permanent link">&para;</a></h2>
<h3 id="erweiterte-uds3corewithgeo4d-klasse">Erweiterte UDS3CoreWithGeo4D-Klasse<a class="headerlink" href="#erweiterte-uds3corewithgeo4d-klasse" title="Permanent link">&para;</a></h3>
<pre><code class="language-python">class UDS3CoreWithGeo4D(UDS3CoreWithGeo):
    &quot;&quot;&quot;4D-erweiterte UDS3-Integration&quot;&quot;&quot;

    def store_document_with_4d_geo(self, content: str, title: str, metadata: Dict,
                                  geo_location: Enhanced4DGeoLocation = None,
                                  auto_extract_4d: bool = True) -&gt; str:
        &quot;&quot;&quot;Speichert Dokument mit 4D-Geo-Extraktion&quot;&quot;&quot;

        # Standard UDS3-Speicherung
        doc_id = super().store_document(content, title, metadata)

        # 4D-Geo-Processing
        if self.geo_4d_enabled:
            if not geo_location and auto_extract_4d:
                # Erweiterte 4D-Extraktion
                geo_location = self.extract_4d_location(content, title, metadata)

            if geo_location and validate_4d_geo_location(geo_location):
                # Multi-Database 4D-Synchronisation
                self._sync_4d_geo_to_all_databases(doc_id, geo_location, metadata)

        return doc_id

    def search_by_4d_location(self, center_coord: SpatialCoordinate, 
                             radius_m: float,
                             time_range: Optional[Tuple[datetime, datetime]] = None,
                             target_crs: Optional[CoordinateReferenceSystem] = None,
                             volume_filter: Optional[Dict] = None) -&gt; List[Dict]:
        &quot;&quot;&quot;4D-räumlich-zeitliche Suche&quot;&quot;&quot;

        # PostGIS 4D-Backend
        postgis_results = self.postgis_4d_backend.spatial_search_4d(
            center_coord, radius_m, time_range, target_crs
        )

        # Neo4j 4D-Beziehungen
        spatial_relationships = self._query_4d_spatial_relationships(
            center_coord, radius_m, time_range
        )

        # ChromaDB Geo-4D-Embeddings
        semantic_results = self._semantic_4d_search(center_coord, radius_m)

        # Ergebnisse zusammenführen und bewerten
        return self._merge_4d_search_results(
            postgis_results, spatial_relationships, semantic_results
        )
</code></pre>
<h2 id="performance-optimierung-fur-4d-daten">Performance-Optimierung für 4D-Daten<a class="headerlink" href="#performance-optimierung-fur-4d-daten" title="Permanent link">&para;</a></h2>
<h3 id="postgis-4d-performance-tuning">PostGIS 4D-Performance-Tuning<a class="headerlink" href="#postgis-4d-performance-tuning" title="Permanent link">&para;</a></h3>
<pre><code class="language-sql">-- Erweiterte räumliche Indizes für 4D
CREATE INDEX idx_4d_spatial_temporal ON uds3_documents_4d_geo 
    USING GIST(location_4d, temporal_validity_start, temporal_validity_end);

-- Partitionierung nach Zeit
CREATE TABLE uds3_documents_4d_geo_2024 PARTITION OF uds3_documents_4d_geo
    FOR VALUES FROM ('2024-01-01') TO ('2025-01-01');

-- CRS-spezifische Indizes
CREATE INDEX idx_crs_wgs84_3d ON uds3_documents_4d_geo 
    USING GIST(location_3d) WHERE native_crs = 'EPSG:4979';

CREATE INDEX idx_crs_utm32n ON uds3_documents_4d_geo 
    USING GIST(ST_Transform(location_3d, 25832)) WHERE 'EPSG:25832' = ANY(supported_crs);
</code></pre>
<h3 id="caching-strategien">Caching-Strategien<a class="headerlink" href="#caching-strategien" title="Permanent link">&para;</a></h3>
<pre><code class="language-python">class Geo4DCache:
    &quot;&quot;&quot;4D-Geodaten-Cache-Manager&quot;&quot;&quot;

    def __init__(self):
        self.crs_transformation_cache = {}
        self.spatial_query_cache = {}
        self.admin_hierarchy_cache = {}
        self.volume_calculation_cache = {}

    def cache_crs_transformation(self, from_crs: str, to_crs: str, 
                                transformer: Any, ttl: int = 3600):
        &quot;&quot;&quot;Cached CRS-Transformationen&quot;&quot;&quot;
        cache_key = f&quot;{from_crs}-&gt;{to_crs}&quot;
        self.crs_transformation_cache[cache_key] = {
            'transformer': transformer,
            'expires': time.time() + ttl
        }
</code></pre>
<h2 id="qualitatssicherung-und-validierung">Qualitätssicherung und Validierung<a class="headerlink" href="#qualitatssicherung-und-validierung" title="Permanent link">&para;</a></h2>
<h3 id="4d-datenqualitat-framework">4D-Datenqualität-Framework<a class="headerlink" href="#4d-datenqualitat-framework" title="Permanent link">&para;</a></h3>
<pre><code class="language-python">class Geo4DQualityFramework:
    &quot;&quot;&quot;Qualitätssicherung für 4D-Geodaten&quot;&quot;&quot;

    def validate_4d_coordinate(self, coord: SpatialCoordinate) -&gt; QualityReport:
        &quot;&quot;&quot;Umfassende 4D-Koordinaten-Validierung&quot;&quot;&quot;

        quality_report = QualityReport()

        # Räumliche Plausibilität
        if coord.crs in [CoordinateReferenceSystem.WGS84_2D, CoordinateReferenceSystem.WGS84_3D]:
            if not (-180 &lt;= coord.x &lt;= 180 and -90 &lt;= coord.y &lt;= 90):
                quality_report.add_error(&quot;Invalid geographic coordinates&quot;)

        # Höhen-Plausibilität (Deutschland: -5m bis 3000m)
        if coord.z is not None:
            if not (-10 &lt;= coord.z &lt;= 3000):
                quality_report.add_warning(f&quot;Unusual elevation: {coord.z}m&quot;)

        # Zeitliche Plausibilität
        if coord.t is not None:
            now = datetime.now()
            if coord.t &gt; now + timedelta(days=1):
                quality_report.add_error(&quot;Future timestamp&quot;)
            elif coord.t &lt; datetime(1900, 1, 1):
                quality_report.add_error(&quot;Historical timestamp too old&quot;)

        # Genauigkeits-Konsistenz
        if coord.accuracy_xy and coord.accuracy_z:
            if coord.accuracy_z &gt; coord.accuracy_xy * 10:
                quality_report.add_warning(&quot;Inconsistent accuracy values&quot;)

        return quality_report

    def assess_4d_geometry_quality(self, geometry: SpatialGeometry) -&gt; float:
        &quot;&quot;&quot;Bewertung der 4D-Geometrie-Qualität (0-1)&quot;&quot;&quot;

        quality_factors = []

        # Koordinaten-Qualität
        if isinstance(geometry.coordinates, SpatialCoordinate):
            coord_report = self.validate_4d_coordinate(geometry.coordinates)
            quality_factors.append(1.0 - (len(coord_report.errors) * 0.3 + len(coord_report.warnings) * 0.1))

        # Geometrie-spezifische Qualität
        if geometry.geometry_type in [GeometryType.SPHERE, GeometryType.CYLINDER, GeometryType.BOX]:
            volume = geometry.calculate_volume()
            if volume and volume &gt; 0:
                quality_factors.append(1.0)  # Valides Volumen
            else:
                quality_factors.append(0.5)  # Problematisches Volumen

        # Metadaten-Vollständigkeit
        completeness = 0.0
        if geometry.source: completeness += 0.2
        if geometry.acquisition_method: completeness += 0.2  
        if geometry.geometric_accuracy: completeness += 0.3
        if geometry.topological_quality: completeness += 0.3
        quality_factors.append(completeness)

        return sum(quality_factors) / len(quality_factors) if quality_factors else 0.0
</code></pre>
<h2 id="monitoring-und-analytics">Monitoring und Analytics<a class="headerlink" href="#monitoring-und-analytics" title="Permanent link">&para;</a></h2>
<h3 id="4d-geodaten-metriken">4D-Geodaten-Metriken<a class="headerlink" href="#4d-geodaten-metriken" title="Permanent link">&para;</a></h3>
<pre><code class="language-python">class Geo4DMonitoring:
    &quot;&quot;&quot;Monitoring für 4D-Geodaten-System&quot;&quot;&quot;

    def collect_4d_metrics(self) -&gt; Dict[str, Any]:
        &quot;&quot;&quot;Sammelt umfassende 4D-Metriken&quot;&quot;&quot;

        return {
            'coordinates': {
                'total_4d_coordinates': self._count_4d_coordinates(),
                'crs_distribution': self._get_crs_distribution(),
                'accuracy_statistics': self._calculate_accuracy_stats(),
                'temporal_coverage': self._get_temporal_coverage()
            },
            'geometries': {
                'geometry_type_distribution': self._get_geometry_types(),
                'volumetric_statistics': self._get_volume_stats(),
                'quality_distribution': self._get_quality_distribution()
            },
            'performance': {
                'avg_4d_query_time': self._measure_4d_query_performance(),
                'crs_transformation_rate': self._measure_transformation_performance(),
                'cache_hit_rates': self._get_cache_statistics()
            },
            'administrative': {
                'admin_coverage': self._get_administrative_coverage(),
                'temporal_admin_mappings': self._count_temporal_admin_mappings()
            }
        }
</code></pre>
<h2 id="fazit-und-ausblick">Fazit und Ausblick<a class="headerlink" href="#fazit-und-ausblick" title="Permanent link">&para;</a></h2>
<p>Das UDS3 4D-Geodaten-Integrations-System bietet eine <strong>revolutionäre Plattform</strong> für die Verarbeitung, Speicherung und Analyse von <strong>4-dimensionalen Geodaten</strong> im Kontext der deutschen Rechtsprechung und Verwaltung.</p>
<h3 id="kernvorteile">Kernvorteile<a class="headerlink" href="#kernvorteile" title="Permanent link">&para;</a></h3>
<p>✅ <strong>Vollständige 4D-Integration</strong>: X,Y,Z,T + Transformations-Parameter U,V,W<br />
✅ <strong>Multi-CRS-Kompatibilität</strong>: Nahtloser Umgang mit verschiedenen Koordinatensystemen<br />
✅ <strong>Zeitbasierte Geo-Analysen</strong>: Temporal-räumliche Rechtsprechungs-Entwicklung<br />
✅ <strong>3D-Volumetrie</strong>: Gebäude, Infrastruktur, komplexe räumliche Objekte<br />
✅ <strong>Performance-optimiert</strong>: Spezialisierte 4D-Indizes und Caching<br />
✅ <strong>Qualitätssicherung</strong>: Umfassendes Validierungs- und Monitoring-Framework<br />
✅ <strong>Deutsche Spezifikation</strong>: AGS-Codes, administrative Hierarchien, lokale CRS  </p>
<h3 id="zukunftige-erweiterungen">Zukünftige Erweiterungen<a class="headerlink" href="#zukunftige-erweiterungen" title="Permanent link">&para;</a></h3>
<p>🔮 <strong>5D-Integration</strong>: Zusätzliche Dimensionen (Temperatur, Druck, etc.)<br />
🔮 <strong>AI-Enhanced Geo-Extraction</strong>: Machine Learning für komplexe Geo-Referenzierung<br />
🔮 <strong>Real-Time 4D-Streaming</strong>: Live-Geodaten für Echtzeitanwendungen<br />
🔮 <strong>Federated 4D-Queries</strong>: Verteilte Abfragen über mehrere 4D-Datenquellen<br />
🔮 <strong>Augmented Reality Integration</strong>: AR-Visualisierung von 4D-Rechtsdaten  </p>
<hr />
<p><strong>Autor:</strong> Veritas UDS3 Team<br />
<strong>Version:</strong> 2.0 (4D-Integration)<br />
<strong>Datum:</strong> 22. August 2025<br />
<strong>Status:</strong> Production Ready mit 4D-Extension</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Zurück zum Seitenanfang
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "content.code.copy", "content.action.edit", "toc.follow"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>